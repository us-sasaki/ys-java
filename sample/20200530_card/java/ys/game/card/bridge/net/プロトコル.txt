ネットワークプロトコル

設計観点
・実装しやすいこと
・機能の拡張が容易であること
・通信リソースをあまり使わないこと
  (通信量を減らす、サーバポートは１つ、ユーザ１につき、ソケット１つ)
に留意する。

テキスト形式を基本とする
１行が１コマンドをあらわすとする。#ではじまり、(CR)で終わる。
コマンドは POST であって、レスポンスは期待しない。

コマンド形式
<PROTOCOLVER><USERID><COMMAND> <ARG>\n

使用文字
<PROTOCOLVER>, <USERID>, <COMMAND>, <ARG> は英数字と記号(7bit ASCII)を使用する。

各フィールド
<PROTOCOLVER>……今回は固定長の "#" とする。
<USERID>……サーバが割り当てるネットワーククライアントIDで、３文字とする。今回は001,002のように数字を割り当てることとする。
<COMMAND>……英数字からなるコマンド種別を表す文字列で、つづいて必ずスペースを配置する。あまり長くならないように留意する。
<ARG>……必要な場合に設定される引数。

Command

PING

ネットワークが正常に機能しているかをテストする。
これを受けた通信相手は PONG を返す。

引数
なし

BID

ビッドを通知する。

引数
"1NT"/"2C"/"4D"/"X"/"P" など

PLAY

プレイを通知する

引数
"H4"/"SA"/"DT" など

CHAT

チャット内容を通知する。

引数
チャット内容を Shift-JIS に変換しヘキサ文字で表示する。

REQ

直前のBID/PLAY内容の再送を要求する。

引数
なし
